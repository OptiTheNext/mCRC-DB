{% extends "base.html" %}
{% block Unterschrift %}
    <p>Charite zu Berlin, 2010-2021</p>
{% endblock %}

Lol, hier steht was, was keiner lesen kann.

{% block MainContent %}
    <script type="module" src="{{ url_for('static', filename='tags.js') }}"></script>
    <script type="module" src="{{ url_for('static', filename='script.js') }}"></script>

    <label for="server_tags" class="form-label">Zu untersuchende Spalten</label>
    <select
            class="form-select"
            id="server_tags"
            name="server_side_tags[]"
            multiple
            data-allow-new="false"
            data-server="/api/tags"
            data-clearEnd="true"
            data-allowClear="true"
    >
        <option disabled hidden value="">Choose a tag...</option>
    </select>
    <br>

    <script>
        async function send_and_deactivate() {
            const start_thinking = $("#Start_Thinking");
            start_thinking.prop("disabled", true);
            // aktiviere spinner
            start_thinking.empty()
            start_thinking.append("Loading")
            start_thinking.append('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>')
            await submitTags();
        }

        function submitTags() {
            // deaktiviere knopf
            let table_one = $("#table_one").is(':checked');
            let grafik_deskriptiv = $("#grafik_deskriptiv").is(':checked');
            let saphiro = $("#saphiro").is(':checked');
            let kolmogorov = $("#kolmogorov").is(':checked');
            let anderson = $("#anderson").is(':checked');
            let qq = $("#qq").is(':checked');
            let linear = $("#linear").is(':checked');
            let log = $("#log").is(':checked');
            let korrelation = $("#korrelation").is(':checked');
            let server_tags = $("#server_tags").val()
            let reg_tags_one = $("#reg_tags_one").val()
            let reg_tags_two = $("#reg_tags_two").val()
            let histo = $("#histo").is(':checked');
            let ttest_v = $("#ttest_v").is(':checked');
            let ttest_unv = $("#ttest_unv").is(':checked');
            let utest = $("#utest").is(':checked');
            let will = $("#will").is(':checked');


            console.log($("#serverSideTags").val());
            const xhr = new XMLHttpRequest();
            xhr.open("POST", "/datenanalyse", true);
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.send(JSON.stringify({
                "server_tags": server_tags,
                "reg_tags_one": reg_tags_one,
                "reg_tags_two": reg_tags_two,
                "table_one": table_one,
                "grafik_deskriptiv": grafik_deskriptiv,
                "saphiro": saphiro,
                "kolmogorov": kolmogorov,
                "anderson": anderson,
                "qq": qq,
                "linear": linear,
                "korrelation": korrelation,
                "histo": histo,
                "ttest_v": ttest_v,
                "ttest_unv": ttest_unv,
                "utest": utest,
                "will": will
            }));
            xhr.onreadystatechange = function () {
                if (xhr.readyState !== 4) return;
                console.log(xhr.readyState)
                if (xhr.status !== 200 && xhr.status !== 304) {
                    alert('HTTP error ' + req.status);
                }
                const start_thinking = $("#Start_Thinking");
                // aktiviere knopf
                start_thinking.attr("disabled", false);
                // deaktiviere spinner
                start_thinking.empty()
                start_thinking.append("STATISTIK!")
                window.open('export_statistik');
                console.log("ich öffne...")

            }

        }
    </script>
    {% if RenderParameters["df"] %}
        <div class="alert alert-success" role="alert">
            <h4 class="alert-heading">Daten übernommen</h4>
        </div>
    {% endif %}
    <form id="InputForm" action="" method="post" autocomplete="off">

        <div class="container" style="margin-left: 0">
            <div class="row">
                <div class="col" style="padding: 10px;">
                    <div class="p-3 border bg-light shadow-sm overflow-auto" style="height:400px;">
                        <h3>Statistik</h3>
                        <hr>
                        <div class="accordion accordion-flush" id="op2_accordion_lab">
                            <div class="accordion-item">
                                <h2 class="accordion-header " id="flush-headingOne-limaxinitial">
                                    <button class="accordion-button collapsed bg-light" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#flush-collapseOne-limaxinitial"
                                            aria-expanded="false" aria-controls="flush-collapseOne">
                                        Table One
                                    </button>
                                </h2>
                                <div id="flush-collapseOne-limaxinitial" class="accordion-collapse collapse bg-light"
                                     aria-labelledby="flush-headingOne-limaxinitial"
                                     data-bs-parent="#accordionFlushExample">
                                    <div class="accordion-body">

                                        <input class="form-check-input" type="checkbox" id="table_one" name="table_one"
                                               value="Hurensohn"><label for="table_one">Table One </label>
                                        <input class="form-check-input" type="checkbox" id="grafik_deskriptiv"
                                               name="grafik_deskriptiv" value="true"><label for="grafik_deskriptiv">Grafik </label>

                                    </div>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="flush-headingTwo-limax2">
                                    <button class="accordion-button collapsed bg-light" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#flush-collapseTwo-limax2"
                                            aria-expanded="false" aria-controls="flush-collapseTwo">
                                        Normalverteilung
                                    </button>
                                </h2>
                                <div id="flush-collapseTwo-limax2" class="accordion-collapse collapse bg-light"
                                     aria-labelledby="flush-headingTwo-limax2" data-bs-parent="#accordionFlushExample">
                                    <div class="accordion-body">
                                        <div class="form-group">
                                            <input class="form-check-input" type="checkbox" id="saphiro" name="saphiro"
                                                   value="true"><label for="saphiro">Saphiro-Wilk-Test auf
                                                                                     Normalverteilung</label>
                                            <input class="form-check-input" type="checkbox" id="kolmogorov"
                                                   name="kolmogorov" value="true">
                                            <label for="kolmogorov">Kolmogorov-Smirnov-Test</label>
                                            <input class="form-check-input" type="checkbox" id="anderson"
                                                   name="anderson" value="true">
                                            <label for="anderson">Anderson-Test</label>
                                            <input class="form-check-input" type="checkbox" id="qq" name="qq"
                                                   value="true">
                                            <label for="qq">Q-Q Plot</label>
                                            <input class="form-check-input" type="checkbox" id="histo" name="histo"
                                                   value="true">
                                            <label for="histo">Histogram</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="flush-headingthree-limax3">
                                    <button class="accordion-button collapsed bg-light" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#flush-collapsethree-limax3"
                                            aria-expanded="false" aria-controls="flush-collapsethree-limax3">
                                        Statistische Tests
                                    </button>
                                </h2>
                                <div id="flush-collapsethree-limax3" class="accordion-collapse collapse bg-light"
                                     aria-labelledby="flush-headingthree-limax3"
                                     data-bs-parent="#accordionFlushExample">
                                    <div class="accordion-body">
                                        <div class="form-group">
                                            <input class="form-check-input" type="checkbox" id="linear" name="linear"
                                                   value="true"><label for="linear">Lineare Regression</label>
                                            <label for="serverSideTags" class="form-label">Wähle einen Werte</label>
                                            <select
                                                    class="form-select"
                                                    style="width: 30%;"
                                                    id="reg_tags_one"
                                                    name="server_side_tags[]"
                                                    data-allow-new="false"
                                                    data-server="/api/tags"
                                                    data-clearEnd="true"
                                                    data-allowClear="true"
                                            >
                                                <option disabled hidden value="">Choose a tag...</option>
                                            </select>
                                            <br>
                                            <select
                                                    class="form-select"
                                                    style="width: 30%;"
                                                    id="reg_tags_two"
                                                    name="server_side_tags[]"
                                                    data-allow-new="false"
                                                    data-server="/api/tags"
                                                    data-clearEnd="true"
                                                    data-allowClear="true"
                                            >
                                                <option disabled hidden value="">Choose a tag...</option>
                                            </select>
                                            <input class="form-check-input" type="checkbox" id="korrelation"
                                                   name="korrelation" value="true">
                                            <label for="korrelation">Korrelationskoeffizient</label>
                                            <input class="form-check-input" type="checkbox" id="ttest_v" name="ttest_v"
                                                   value="true">
                                            <label for="ttest_v" data-toggle="tooltip"
                                                   data-placement="right"
                                                   title="Please select a Boolean and a Number"
                                                   animation="true" html="true">T-Test verbunden</label>
                                            <input class="form-check-input" type="checkbox" id="ttest_unv" name="log"
                                                   value="true">
                                            <label for="ttest_unv" data-toggle="tooltip"
                                                   data-placement="right"
                                                   title="Please select a Boolean and a Number"
                                                   animation="true" html="true">T-Test unverbunden</label>
                                            <input class="form-check-input" type="checkbox" id="utest" name="utest"
                                                   value="true">
                                            <label for="utest" data-toggle="tooltip"
                                                   data-placement="right"
                                                   title="Please select a Boolean and a Number"
                                                   animation="true" html="true">Mann-Whitney-U-Test</label>
                                            <input class="form-check-input" type="checkbox" id="will" name="will"
                                                   value="true">
                                            <label for="will" data-toggle="tooltip"
                                                   data-placement="right"
                                                   title="Please select a Boolean and a Number"
                                                   animation="true" html="true">Wilcoxon</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <button class="btn btn-secondary" type="button" value="STATISTIK!" onclick="send_and_deactivate()"
                    id="Start_Thinking" name="Start_Thinking">STATISTIK!
            </button>
        </div>
    </form>
{% endblock %}

  




